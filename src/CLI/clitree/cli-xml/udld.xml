<?xml version="1.0" encoding="UTF-8"?>
<CLISH_MODULE
    xmlns="http://www.dellemc.com/sonic/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema
                        http://www.dellemc.com/sonic/XMLSchema/clish.xsd">
<!--=========================================================================-->

    <PTYPE
        name = "UDLD_MSG_TIME_TYPE"
        method = "integer"
        pattern = "1..30"
        help = ""
    />
    <PTYPE
        name = "UDLD_MULTIPLIER_TYPE"
        method = "integer"
        pattern = "3..10"
        help = ""
    />
    <VIEW name="enable-view">
        <COMMAND name = "show udld" help = "Show UDLD information" />

        <!-- show udld global -->
        <COMMAND name = "show udld global"
            help = "Show UDLD global level information">
            <ACTION builtin="clish_pyobj">sonic_cli_udld get_sonic_udld_sonic_udld_udld_udld_list show_udld_global.j2</ACTION>
        </COMMAND>

        <!-- show udld neighbors -->
        <COMMAND name = "show udld neighbors"
            help = "Show UDLD neighbors information">
            <ACTION builtin="clish_pyobj">sonic_cli_udld get_list_sonic_udld_sonic_udld_udld_port_neigh_table_udld_port_neigh_table_list show_udld_neighbor.j2</ACTION>
        </COMMAND>

        <!-- show udld interface <ifname> -->
        <COMMAND name = "show udld interface"
            help = "Show UDLD interface level information">
            <PARAM 
                name = "interface-name"
                help = "Interface name"
                ptype = "STRING">
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_udld get_sonic_udld_sonic_udld_udld_port_neigh_table_udld_port_neigh_table_list show_udld_interface.j2 ${interface-name}</ACTION>
        </COMMAND>

        <COMMAND name = "show udld statistics" help = "Show UDLD statistics">
            <ACTION builtin="clish_pyobj">sonic_cli_udld get_list_sonic_udld_sonic_udld_udld_port_table_udld_port_table_list show_udld_stats.j2</ACTION>
        </COMMAND>
        <!-- show udld counters interface <ifname> -->
        <COMMAND name = "show udld statistics interface"
            help = "Show UDLD interface level statistics">
            <PARAM 
                name = "interface-name"
                help = "Interface name"
                ptype = "STRING">
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_udld get_sonic_udld_sonic_udld_udld_port_table_udld_port_table_list show_udld_stats.j2 ${interface-name}</ACTION>
        </COMMAND>

        <!--
        <COMMAND name = "debug udld" help = "UDLD debug commands" />
        <COMMAND name = "no debug udld" help = "UDLD debug commands" />
        <COMMAND name = "debug udld dump" help = "Dump UDLD info commands" />
        <COMMAND name = "no debug udld dump" help = "Dump UDLD info commands" />
        <COMMAND name = "debug udld dump global" help = "Dump UDLD global debug information">
            <ACTION builtin="clish_pyobj">sonic_cli_udld udldGlobalDebugHandler 1</ACTION>
        </COMMAND>
        <COMMAND name = "no debug udld dump global" help = "Dump UDLD global debug information">
            <ACTION builtin="clish_pyobj">sonic_cli_udld udldGlobalDebugHandler 0</ACTION>
        </COMMAND>
        <COMMAND name = "debug udld dump interface" help = "Dump UDLD interface debug information">
            <PARAM 
                name = "interface-name"
                help = "Interface name"
                ptype = "STRING">
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_udld udldInterfaceDebugHandler 1 ${interface-name}</ACTION>
        </COMMAND>
        <COMMAND name = "no debug udld dump interface" help = "Dump UDLD interface debug information">
            <PARAM 
                name = "interface-name"
                help = "Interface name"
                ptype = "STRING">
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_udld udldInterfaceDebugHandler 0 ${interface-name}</ACTION>
        </COMMAND>

        <COMMAND name = "clear udld" help = "UDLD Clear commands" />
        <COMMAND name = "clear udld statistics" help = "Clear UDLD statistics">
            <ACTION builtin="clish_pyobj">sonic_cli_udld udldInterfaceCountersClearHandler</ACTION>
        </COMMAND>
        -->
        <!-- clear udld counters interface <ifname> -->
        <!--
        <COMMAND name = "clear udld statistics interface"
            help = "Clear UDLD interface level statistics">
            <PARAM 
                name = "interface-name"
                help = "Interface name"
                ptype = "STRING">
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_udld udldInterfaceCountersClearHandler ${interface-name}</ACTION>
        </COMMAND>
        -->
    </VIEW>


    <VIEW name="configure-view">
        <COMMAND name="udld" help="UDLD configuration subcommands"/>
        <COMMAND name="no udld" help="UDLD configuration subcommands"/>
        <COMMAND name = "udld enable"
            help = "Enable UDLD at global level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld post_list_sonic_udld_sonic_udld_udld_udld_list</ACTION>
        </COMMAND>
        <COMMAND name = "no udld enable"
            help = "Disable UDLD at global level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld delete_sonic_udld_sonic_udld_udld</ACTION>
        </COMMAND>
        <COMMAND name = "udld aggressive"
            help = "Enable aggressive UDLD mode at global level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_udld_list_aggressive true</ACTION>
        </COMMAND>
        <COMMAND name = "no udld aggressive"
            help = "Disable aggressive UDLD mode at global level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_udld_list_aggressive false</ACTION>
        </COMMAND>
        <COMMAND name = "udld message-time"
            help = "Configure UDLD message time value in seconds (1 - 30 sec)">
            <PARAM
                name="msg-time"
                help="Message time value (Range 1 - 30 seconds)"
                ptype="UDLD_MSG_TIME_TYPE"
                >
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_udld_list_msg_time ${msg-time}</ACTION>
        </COMMAND>
        <COMMAND name = "no udld message-time" help = "Reset UDLD Message time">
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_udld_list_msg_time 0</ACTION>
        </COMMAND>

        <COMMAND name = "udld multiplier"
            help = "Configure UDLD multiplier value (3 - 10)">
            <PARAM
                name="multiplier"
                help="Multiplier value (Range 3 - 10)"
                ptype="UDLD_MULTIPLIER_TYPE"
                >
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_udld_list_multiplier ${multiplier}</ACTION>
        </COMMAND>
        <COMMAND name = "no udld multiplier" help = "Reset UDLD Multiplier">
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_udld_list_multiplier 0</ACTION>
        </COMMAND>
    </VIEW>


    <!--MODE : interface -->
    <VIEW name="configure-if-view">
        <COMMAND name="udld" help="UDLD interface configuration subcommands"/>
        <COMMAND name="no udld" help="UDLD interface configuration subcommands"/>
        <COMMAND name = "udld enable"
            help = "Enable UDLD at interface level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld post_list_sonic_udld_sonic_udld_udld_port_udld_port_list ${iface}</ACTION>
        </COMMAND>
        <COMMAND name = "no udld enable"
            help = "Disable UDLD at interface level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld delete_sonic_udld_sonic_udld_udld_port_udld_port_list ${iface}</ACTION>
        </COMMAND>
        <COMMAND name = "udld aggressive"
            help = "Enable aggressive mode UDLD at interface level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_port_udld_port_list_aggressive true ${iface}</ACTION>
        </COMMAND>
        <COMMAND name = "no udld aggressive"
            help = "Disable aggressive mode UDLD at interface level">
            <ACTION builtin="clish_pyobj">sonic_cli_udld patch_sonic_udld_sonic_udld_udld_port_udld_port_list_aggressive false ${iface}</ACTION>
        </COMMAND>
    </VIEW>
</CLISH_MODULE>
