<?xml version="1.0" encoding="UTF-8"?>
<CLISH_MODULE xmlns="http://www.dellemc.com/sonic/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xi="http://www.w3.org/2001/XInclude" xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema http://www.dellemc.com/sonic/XMLSchema/clish.xsd">
	<PTYPE
		name="PTP_V6SCOPE_TYPE"
		pattern="0[xX][0-9a-fA-F]"
		help="Hexadecimal range (0x0-0xf)"
		/>
	<PTYPE
		name="RANGE_2_255"
		method="integer"
		pattern="2..255"
		help=""
		/>
	<PTYPE
		name="RANGE_0_127"
		method="integer"
		pattern="0..127"
		help=""
		/>
	<VIEW name="enable-view">
		<!--show ptp -->
		<COMMAND name="show ptp" help="Show PTP config info/status">
			<PARAM name="ptp-subcommands" help="PTP subcommands" mode="switch" ptype="SUBCOMMAND" optional="true">
				<PARAM name="time-property" help="time property" ptype="SUBCOMMAND" mode="subcommand"> </PARAM>
				<PARAM name="clock" help="clock" ptype="SUBCOMMAND" mode="subcommand"> </PARAM>
				<PARAM name="parent" help="parent" ptype="SUBCOMMAND" mode="subcommand"> </PARAM>
				<PARAM name="port" help="PTP port config" ptype="SUBCOMMAND" mode="subcommand">
					<MACRO name="PTP-CFG-IF-TYPE" arg=""/>
				</PARAM>
			</PARAM>
			<ACTION>if test "${ptp-subcommands}" = "time-property"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py get_ietf_ptp_ptp_instance_list_time_properties_ds 0 ptp_tp_show.j2 &#xA;
 elif test "${ptp-subcommands}" = "clock"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py get_ietf_ptp_ptp_instance_list_default_ds 0 ptp_clock_show.j2 &#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py get_ietf_ptp_ptp_instance_list_current_ds 0 ptp_currentds_show.j2 &#xA;
 elif test "${ptp-subcommands}" = "parent"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py get_ietf_ptp_ptp_instance_list_parent_ds 0 ptp_parent_show.j2 &#xA;
 elif test "${ptp-subcommands}" = "port"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py get_ietf_ptp_ptp_instance_list_port_ds_list 0 ${cfg-if-type}${ptp_port_number} ptp_port_show.j2 &#xA;
 elif test "${ptp-subcommands}" = ""; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py get_ietf_ptp_ptp_instance_list 0 ptp_show.j2&#xA; 
 else&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py get_ietf_ptp_ptp_instance_list 0 ptp_port_show.j2 &#xA;
 fi&#xA;
				</ACTION>
		</COMMAND>
	</VIEW>
	<VIEW name="configure-view">
		<COMMAND name="ptp" help="PTP commands">
			<PARAM name="cfg-ptp-subcommands" help="PTP subcommands" mode="switch" ptype="SUBCOMMAND">
				<PARAM name="mode" help="PTP mode" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="mode_type" help="Enter ptp mode" ptype="PTP_MODE"/>
				</PARAM>
				<PARAM name="network-transport" help="PTP network transport" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_network_transport_type" help="Enter PTP network transport type" ptype="PTP_TRANSPORT"/>
					<PARAM name="ptp_master_slave" help="unicast mode/multicast" ptype="PTP_MST_SLV"/>
				</PARAM>
				<PARAM name="ipv6-scope" help="PTP IPv6 multicast scope" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_ipv6_scope" help="Scope used for IPv6 multicast message. Used as second byte of the primary address" ptype="PTP_V6SCOPE_TYPE"/>
				</PARAM>
				<PARAM name="domain" help="PTP domain" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_domain" help="Enter PTP domain value" ptype="RANGE_0_127"/>
				</PARAM>
				<PARAM name="domain-profile" help="PTP domain profile" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_domain_profile" help="Enter PTP domain profile type" ptype="PTP_DOMAIN_PROFILE"/>
				</PARAM>
				<PARAM name="two-step" help="PTP two step enable" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_two_step" help="Enable/Disable " ptype="ENA_DISA"/>
				</PARAM>
				<PARAM name="priority1" help="PTP priority1" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_priority1" help="Enter PTP priority1 value" ptype="RANGE_0_255"/>
				</PARAM>
				<PARAM name="priority2" help="PTP priority2" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_priority2" help="Enter PTP priority2 value" ptype="RANGE_0_255"/>
				</PARAM>
				<PARAM name="log-announce-interval" help="PTP announce interval" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_announce_interval" help="Enter PTP announce interval value" ptype="INT8_RANGE"/>
				</PARAM>
				<PARAM name="announce-timeout" help="PTP announce timeout" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_announce_timeout" help="Enter PTP announce timeout value" ptype="RANGE_2_255"/>
				</PARAM>
				<PARAM name="log-sync-interval" help="PTP sync interval" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_sync_interval" help="Enter PTP sync interval value" ptype="INT8_RANGE"/>
				</PARAM>
				<PARAM name="log-min-delay-req-interval" help="PTP delay request interval" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="ptp_delay_request_interval" help="Enter PTP delay request interval value" ptype="INT8_RANGE"/>
				</PARAM>
				<PARAM name="port" help="PTP port config" ptype="SUBCOMMAND" mode="subcommand">
					<PARAM name="cfg-ptp-port-subcommands" help="PTP subcommands" mode="switch" ptype="SUBCOMMAND">
						<PARAM name="add" help="Add Interface" ptype="SUBCOMMAND" mode="subcommand">
							<MACRO name="PTP-CFG-IF-TYPE" arg=""/>
						</PARAM>
						<PARAM name="del" help="Add Interface" ptype="SUBCOMMAND" mode="subcommand">
							<MACRO name="PTP-CFG-IF-TYPE" arg=""/>
						</PARAM>
						<PARAM name="master-table" help="Master nodes list when this node is configured as slave" ptype="SUBCOMMAND" mode="subcommand">
							<MACRO name="PTP-CFG-IF-TYPE" arg=""/>
							<PARAM name="cfg-ptp-mt-subcommands" help="PTP master-table subcommands" mode="switch" ptype="SUBCOMMAND">
								<PARAM name="add" help="Add master nodes" ptype="SUBCOMMAND" mode="subcommand">
									<MACRO name="PTP-DEST-NODE" arg=""/>
								</PARAM>
								<PARAM name="del" help="Delete master nodes" ptype="SUBCOMMAND" mode="subcommand">
									<MACRO name="PTP-DEST-NODE" arg=""/>
								</PARAM>
							</PARAM>
						</PARAM>
					</PARAM>
				</PARAM>
			</PARAM>
			<ACTION>if test "${cfg-ptp-subcommands}" = "mode"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py "clock-type" 0 ${mode_type}&#xA;
 elif test "${cfg-ptp-subcommands}" = "network-transport"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py "network-transport" 0 ${ptp_network_transport_type} &#xA;
 if [ $? -eq 0 ]; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py "unicast-multicast" 0 ${ptp_master_slave}&#xA;
 fi&#xA;
 elif test "${cfg-ptp-subcommands}" = "ipv6-scope"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py "udp6-scope" 0 ${ptp_ipv6_scope}&#xA;
 elif test "${cfg-ptp-subcommands}" = "domain"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_default_ds_domain_number 0 ${ptp_domain}&#xA;
 elif test "${cfg-ptp-subcommands}" = "domain-profile"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py "domain-profile" 0 ${ptp_domain_profile}&#xA;
 elif test "${cfg-ptp-subcommands}" = "two-step"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_default_ds_two_step_flag 0 ${ptp_two_step}&#xA;
 elif test "${cfg-ptp-subcommands}" = "priority1"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_default_ds_priority1 0 ${ptp_priority1}&#xA;
 elif test "${cfg-ptp-subcommands}" = "priority2"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_default_ds_priority2 0 ${ptp_priority2}&#xA;
 elif test "${cfg-ptp-subcommands}" = "log-announce-interval"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_port_ds_list_log_announce_interval 0 ${ptp_announce_interval}&#xA;
 elif test "${cfg-ptp-subcommands}" = "announce-timeout"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_port_ds_list_announce_receipt_timeout 0 ${ptp_announce_timeout}&#xA;
 elif test "${cfg-ptp-subcommands}" = "log-sync-interval"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_port_ds_list_log_sync_interval 0 ${ptp_sync_interval}&#xA;
 elif test "${cfg-ptp-subcommands}" = "log-min-delay-req-interval"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py patch_ietf_ptp_ptp_instance_list_port_ds_list_log_min_delay_req_interval 0 ${ptp_delay_request_interval}&#xA;
 elif test "${cfg-ptp-subcommands}" = "port"; then&#xA;
 if test "${cfg-ptp-port-subcommands}" = "add"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py post_ietf_ptp_ptp_instance_list_port_ds_list_port_state 0 ${cfg-if-type}${ptp_port_number}&#xA;
 elif test "${cfg-ptp-port-subcommands}" = "del"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py delete_ietf_ptp_ptp_instance_list_port_ds_list 0 ${cfg-if-type}${ptp_port_number}&#xA;
 elif test "${cfg-ptp-port-subcommands}" = "master-table"; then&#xA;
 if test "${cfg-ptp-mt-subcommands}" = "add"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py "add_master_table" 0 ${cfg-if-type}${ptp_port_number} ${l3_ip}${mac}&#xA;
 elif test "${cfg-ptp-mt-subcommands}" = "del"; then&#xA;
 python $SONIC_CLI_ROOT/sonic-cli-ptp.py "del_master_table" 0 ${cfg-if-type}${ptp_port_number} ${l3_ip}${mac}&#xA;
 fi&#xA;
 fi&#xA;
 fi&#xA;
			</ACTION>
		</COMMAND>
	</VIEW>
</CLISH_MODULE>
